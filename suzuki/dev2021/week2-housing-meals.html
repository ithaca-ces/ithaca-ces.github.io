<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.1/css/all.css" integrity="sha384-gfdkjb5BdAXd+lj+gudLWI+BXq4IuLW5IT+brZEZsLFm++aCMlF1V92rMkPaX4PP" crossorigin="anonymous">
    <link rel="icon" type="image/png" sizes="32x32" href="https://www.ithaca.edu/sites/default/files/favicons/favicon-32x32.png"/>
    <link rel="icon" type="image/png" sizes="194x194" href="https://www.ithaca.edu/sites/default/files/favicons/favicon-194x194.png"/>
    <link rel="icon" type="image/png" sizes="192x192" href="https://www.ithaca.edu/sites/default/files/favicons/android-chrome-192x192.png"/>
    <link rel="icon" type="image/png" sizes="16x16" href="https://www.ithaca.edu/sites/default/files/favicons/favicon-16x16.png"/>
    <meta charset="UTF-8">
    <title>Suzuki Institutes Housing & Meals Registration</title>
    <style>
        input[type=number]::-webkit-inner-spin-button,
        input[type=number]::-webkit-outer-spin-button {
            opacity: 1;
        }
        .progress.active .progress-bar {
            -webkit-transition: none !important;
            transition: none !important;
        }
    </style>
</head>
<div id="pre" class="container"><br><br><br><br><center><i style="font-size: 8em" class="fas fa-sync fa-spin"></i></center></div>
<div id="post" style="display: none; visibility: hidden" class="container"><br><br><br><br>
    <center>
        <i style="font-size: 8em" class="fas fa-sync fa-spin"></i>
        <br><br>
        <div class="progress progress-striped active" style="height: 35px">
            <div class="progress-bar progress-bar-striped progress-bar-animated bg-success" style="width:0%"></div>
        </div>
        <br>
        <h4>Please wait...You are being directed to the payment portal.</h4>
        <h3>Your registration HAS NOT been finalized until you fully complete the payment process.  You will receive a confirmation email once your registration is complete.</h3>
    </center>
</div>
<body>
<div  id="container" class="container" style="display:none;visibility:hidden">
    <br>
    <h1>Suzuki Institutes: Purchase Week 2 Housing & Meals</h1>
    <div id="dateTitle"></div>
    <hr>
    <div id="errorMessage"></div>

    <h3>Parent/Guardian Contact Information</h3>

    <br>
    <div class="form-row">
        <div class="form-group col-md-6">
            <label for="inputFirstName">First Name <span style="color: red">*</span></label>
            <input type="text" class="form-control" id="inputFirstName">
            <div id="valid-feedback-inputFirstName"></div>
        </div>
        <div class="form-group col-md-6">
            <label for="inputLastName">Last Name <span style="color: red">*</span></label>
            <input type="text" class="form-control" id="inputLastName">
            <div id="valid-feedback-inputLastName"></div>
        </div>
    </div>
    <div class="form-group">
        <label for="inputAddress">Address <span style="color: red">*</span></label>
        <input type="text" class="form-control" id="inputAddress">
        <div id="valid-feedback-inputAddress"></div>
    </div>
    <div class="form-row">
        <div class="form-group col-md-5">
            <label for="inputCity">City <span style="color: red">*</span></label>
            <input type="text" class="form-control" id="inputCity">
            <div id="valid-feedback-inputCity"></div>
        </div>
        <div class="form-group col-md-4">
            <label for="inputState">State/Province <span style="color: red">*</span></label>
            <input type="text" class="form-control" id="inputState">
            <div id="valid-feedback-inputState"></div>
        </div>
        <div class="form-group col-md-3">
            <label for="inputZip">Zip Code <span style="color: red">*</span></label>
            <input type="text" class="form-control" id="inputZip">
            <div id="valid-feedback-inputZip"></div>
        </div>
    </div>
    <div class="form-group">
        <label for="inputPhoneNumber">Phone Number <span style="color: red">*</span></label>
        <input type="text" class="form-control" id="inputPhoneNumber">
        <div id="valid-feedback-inputPhoneNumber"></div>
    </div>
    <div class="form-group">
        <label for="inputEmailAddress">Email Address <span style="color: red">*</span></label>
        <input type="text" class="form-control" id="inputEmailAddress" aria-describedby="emailHelp">
        <small id="emailHelp" class="form-text text-muted">Some help text from Peter will be put here regarding people using their primary email address.</small>
        <div id="valid-feedback-inputEmailAddress"></div>
    </div>



    <hr>

    <div id="noItemsErrorMessage"></div>


    <h3>Housing</h3>
    <div id="housingText"></div>
    <div id="housingInputs">
    </div>

    <hr>

    <h3>Meal Plans</h3>
    <div id="mealPlanText"></div>
    <div class="form-group form-inline ">
        <label for="inputMealPlanCount"><b>Number Of Meal Plans:</b></label> &nbsp;&nbsp;
        <input style="max-width: 400px" min="0" type="number" class="form-control" id="inputMealPlanCount" value="0" onchange="changeMealPlanFields()">
    </div>
    <h5 id="mealPlanInputsTitle" style="visibility: hidden;display:none">Please list the names of all people who will be on a meal plan:</h5>
    <div id="mealPlanInputs">

    </div>

    <hr>

    <div class="form-group">
        <label for="inputAccommodations"><b>Individuals with disabilities requiring accommodations should list them below or contact us at <a href="mailto:suzuki@ithaca.edu">suzuki@ithaca.edu</a>. We ask that requests for accommodations be made as soon as possible.</b></label><br>
        <textarea id="inputAccommodations" rows="4" style="width: 100%"></textarea>
    </div>

    <hr>

    <div id="housingList" style="visibility: hidden; display: none"></div>
    <div id="nameList" style="visibility: hidden; display: none"></div>
    <div id="priceList" style="visibility: hidden; display: none"></div>
    <div id="mealPrice" style="visibility: hidden; display: none"></div>
    <div id="quantityList" style="visibility: hidden; display: none"></div>

    <div style="visibility: hidden;display:none"><input id="inputID" type="text"></div>

    <h5>Please ensure that all of the information that you have filled out above is correct.  You will not be able to change any of this information after you continue to payment.</h5>
    <h5>NOTE: Your registration is not complete until your payment is processed and approved.</h5> <br>

    <button onclick="submit()" class="btn btn-success">Continue To Payment</button>
    <br><br>

    <div id="paymentFormDiv" style="visibility: hidden; display: none">
        <form target="_parent" id="payform" method="post" action="https://shoppingcartsecure.com/cart32.exe/6072743313-AddItem">
            <div id="payFormInputs" style="visibility: hidden; display: none"></div>
        </form>
    </div>

</div>
<div id="hidden" style="display: none; visibility: hidden;"></div>
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript" src="js/utils.js"></script>
<script type="text/javascript" src="js/housing-meals-functions.js"></script>
<script type="text/javascript" src="js/week2-housing-meals.js"></script>
<script>
    var MEAL_PLAN_MAX = 50;
    /** get dates from date Google Spreadsheet **/
    $.get("https://docs.google.com/spreadsheets/d/e/2PACX-1vREtU3aso5YQevwxYncCh60Cwn55X6PuCOuNv1UVHHsLr4G9TJevUa4lPjodkOBM3vUfllVyyEbhmRg/pubhtml?gid=0&single=true",
        function (data, status) {
            var textTable = getTableData(data);
            var week2 = textTable[2][1];
            document.getElementById("dateTitle").innerHTML = "<h2><i>" + week2 + "</i></h2>";
        });
    /** get text about meal plan from Google Spreadsheet **/
    $.get("https://docs.google.com/spreadsheets/d/e/2PACX-1vRHG6-N01AF0rfyVkTGNWvLG4uztSIphcB_qDt8dztRc2jx1C4SMh4QvM_-7YjLCMbI-Z0xlt6JUL1t/pubhtml?gid=56981838&single=true",
        function(data, status) {
            var textTable = getTableData(data);
            var sumString = "";
            for (var i = 1; i < textTable.length; i ++) {
                sumString += "<p>" + textTable[i][0] + "</p>";
            }
            document.getElementById("mealPlanText").innerHTML = sumString;
        });
    /** get meal plan price from Google Spreadsheet **/
    $.get("https://docs.google.com/spreadsheets/d/e/2PACX-1vRHG6-N01AF0rfyVkTGNWvLG4uztSIphcB_qDt8dztRc2jx1C4SMh4QvM_-7YjLCMbI-Z0xlt6JUL1t/pubhtml?gid=1223661694&single=true",
        function(data, status) {
        document.getElementById("mealPrice").innerText = getTableData(data)[1][1];
    });
    /** get text about housing from Google Spreadsheet **/
    $.get("https://docs.google.com/spreadsheets/d/e/2PACX-1vRHG6-N01AF0rfyVkTGNWvLG4uztSIphcB_qDt8dztRc2jx1C4SMh4QvM_-7YjLCMbI-Z0xlt6JUL1t/pubhtml?gid=869859262&single=true",
        function(data, status) {
            var textTable = getTableData(data);
            var sumString = "";
            for (var i = 1; i < textTable.length; i ++) {
                sumString += "<p>" + textTable[i][0] + "</p>";
            }
            document.getElementById("housingText").innerHTML = sumString;
        });
    /** get housing type, price, and amount remaining from Google Spreadsheet **/
    $.get("https://docs.google.com/spreadsheets/d/e/2PACX-1vRHG6-N01AF0rfyVkTGNWvLG4uztSIphcB_qDt8dztRc2jx1C4SMh4QvM_-7YjLCMbI-Z0xlt6JUL1t/pubhtml?gid=256271385&single=true",
        function(data, status) {
            var housingData = getTableData(data);
            var housingInputs = "";
            var housingList = "";
            var nameList = "";
            var priceList = "";
            var quantityList = "";
            for (var i = 1; i < housingData.length; i++) {
                housingList += housingData[i][0].toLowerCase().replace(/ /g, '') + ";;;";
                nameList += housingData[i][0] + ";;;";
                priceList += housingData[i][1] + ";;;";
                quantityList += housingData[i][4] + ";;;";
                if (parseInt(housingData[i][4]) > 0) {
                    var firstLine = "<div class=\"form-group\">";
                    var secondLine = "<label for=\"input" + housingData[i][0].toLowerCase().replace(/ /g, '') + "\"><b>" + housingData[i][0] + " - $" + housingData[i][1] + "</b></label> &nbsp;&nbsp;";
                    var thirdLine = "<input style=\"max-width: 400px\" type=\"number\" min=\"0\" max=\"" + housingData[i][4] + "\" class=\"form-control\" value='0' id=\"input" + housingData[i][0].toLowerCase().replace(/ /g, '') + "\">";
                    var fourthLine = "<small class=\"form-text text-muted\">" + housingData[i][4] + " remaining </small>";
                    var fifthLine = "<div id=\"valid-feedback-input" + housingData[i][0].toLowerCase().replace(/ /g, '')  + "\"></div>";
                    var sixthLine = "</div>";
                    housingInputs += firstLine + secondLine + thirdLine + fourthLine + fifthLine + sixthLine;
                }
            }
            document.getElementById("housingInputs").innerHTML = housingInputs;
            document.getElementById("housingList").innerText = housingList;
            document.getElementById("nameList").innerText = nameList;
            document.getElementById("priceList").innerText = priceList;
            document.getElementById("quantityList").innerText = quantityList;
        }).done(function() {
        makeMealPlanInputs();
            document.getElementById("container").style.display = "inherit";
            document.getElementById("container").style.visibility = "visible";
            document.getElementById("pre").style.display = "none";
            document.getElementById("pre").style.visibility = "hidden";
        })
    </script>

</body>
</html>